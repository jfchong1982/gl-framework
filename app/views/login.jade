mixin ngValidate(form, name)
  - var cls = "{'has-error' : "+form+'.'+name+'.$invalid && ' +form+'.'+name+'.$dirty'
  - cls = cls+", 'has-success' : "+form+'.'+name+'.$valid && '+form+'.'+name+'.$dirty}'
  div.form-group(ng-class!=cls)
    if block
      block

mixin ngInput(label, type, name, model)
  label(for='')= label
  input.form-control(type=type, name=name, ng-model=model, required, gl-focus)


- var form = 'loginForm'

form.form(name=form, ng-submit='login()')
  .alert(class='alert-danger', ng-show='invalidCredentials') Wrong credentials
  
  +ngValidate(form, 'email')
    +ngInput('Email', 'email', 'email', 'user.email')
    p.help-block(ng-show!='#{form}.email.$invalid && #{form}.email.$dirty && !#{form}.email.$focused') Wrong email

  +ngValidate(form, 'password')
    +ngInput('Password', 'password', 'password', 'user.password')

  .form-group
    button.btn(type='submit', class='btn-primary', ng-disabled='#{form}.$invalid') Log In
